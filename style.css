/* ---------- reset & motion ---------- */
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth;scrollbar-gutter:stable}
@media (prefers-reduced-motion:reduce){
  *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}
}

/* ---------- tokens ---------- */
:root{
  --s-1:.5rem; --s-2:1rem; --s-3:1.5rem;
  --radius:.6rem; --radius-lg:.8rem;

  --elev-1:0 2px 10px rgba(0,0,0,.08);
  --elev-1-dark:0 2px 12px rgba(0,0,0,.35);

  /* Cyprus / Sand palette */
  --cyprus:#004643;
  --cyprus-900:#003E3C;
  --cyprus-700:#015554;
  --sand:#F0EDE5;
  --sand-200:#F8F6F1;
  --sand-300:#F4F1EA;

  --accent:#004643;
  --accent-hover:#015554;
  --accent-active:#003E3C;
}

/* ---------- light theme ---------- */
:root, html[data-theme="light"], body.light-theme{
  color-scheme:light;

  --bg:var(--sand);
  --fg:var(--cyprus);

  --surface:var(--sand-300);
  --surface-2:#FFFFFF;
  --border:rgba(0,0,0,.18);
  --muted:#3c5856;
  --elev-shadow:var(--elev-1);

  --header-bg:var(--cyprus-900); --header-fg:#F2F2F0;
  --footer-bg:var(--cyprus-900); --footer-fg:#F2F2F0;

  --header-accent: var(--sand);

  --accent:var(--cyprus);
  --accent-hover:var(--cyprus-700);
  --accent-active:var(--cyprus-900);
  --accent-strong:var(--cyprus-700);
  --accent-weak:color-mix(in oklab, var(--cyprus) 14%, white 86%);

  --focus-ring:color-mix(in oklab, var(--accent) 85%, black 15%);
  --focus-ring-halo:color-mix(in oklab, var(--focus-ring) 28%, transparent);
  --link:var(--cyprus);

  --panel-bg:var(--cyprus-900);
  --panel-fg:var(--sand);
  --panel-border:rgba(255,255,255,.18);
  --panel-hover:color-mix(in oklab, var(--panel-bg) 88%, var(--sand) 12%);

  --paper:#FFFFFF;
  --paper-ink:var(--cyprus);

  --error:var(--accent-strong);
}

/* ---------- dark theme ---------- */
html[data-theme="dark"], body.dark-theme, body[data-theme="dark"], body:not(.light-theme){
  color-scheme:dark;

  --bg:var(--cyprus);
  --fg:var(--sand);

  --surface:#013B3A;
  --surface-2:#003231;
  --border:rgba(255,255,255,.18);
  --muted:#DDE6E4;
  --elev-shadow:var(--elev-1-dark);

  --header-bg:var(--bg); --header-fg:var(--sand);
  --footer-bg:var(--bg); --footer-fg:var(--sand);
  --header-accent: var(--sand);

  --accent:var(--sand);
  --accent-hover:#FBFAF7;
  --accent-active:#E8E3D7;
  --accent-strong:#FBFAF7;
  --accent-weak:color-mix(in oklab, var(--sand) 14%, black 86%);

  --focus-ring:color-mix(in oklab, var(--accent) 85%, white 15%);
  --focus-ring-halo:color-mix(in oklab, var(--focus-ring) 30%, transparent);
  --link:var(--sand);

  --panel-bg:var(--sand);
  --panel-fg:var(--cyprus);
  --panel-border:rgba(0,0,0,.2);
  --panel-hover:color-mix(in oklab, var(--panel-bg) 92%, var(--cyprus) 8%);

  --paper:var(--sand);
  --paper-ink:var(--cyprus);

  --error:var(--accent-strong);
}

/* ---------- base ---------- */
body{
  font-family:'Montserrat',sans-serif;
  background:var(--bg);color:var(--fg);
  line-height:1.65;letter-spacing:.01em;
  transition:background-color .3s,color .3s,border-color .25s,box-shadow .2s
}
body.no-scroll{overflow:hidden}
section{scroll-margin-top:80px;padding:calc(var(--s-3) + 1rem) 0}
.container{max-width:1100px;margin:0 auto;padding:var(--s-2)}
@media (max-width:768px){section{padding:2.75rem 0}}
::selection{background:color-mix(in oklab, var(--accent) 28%, transparent);color:#000}

/* ---------- header & nav ---------- */
header{
  position:sticky;top:0;z-index:999;
  background:var(--header-bg);color:var(--header-fg);
  box-shadow:0 1px 0 rgba(255,255,255,.06);
  --logo-ink:#fff
}
html[data-theme="dark"] header,
body:not(.light-theme) header{ box-shadow:none } 

header .container{display:flex;justify-content:space-between;align-items:center}
header .site-title,header .logo-text,header .brand,header .site-name{display:none!important}
h1{font-size:1.8rem;font-weight:700}

nav{display:flex;align-items:center;gap:1.5rem;position:relative;color:inherit}
nav a{color:inherit;text-decoration:none;font-size:1rem;opacity:.9;transition:opacity .15s,color .2s;font-weight:700}
nav a:hover,nav a:focus-visible{opacity:1;color:var(--header-accent);text-decoration:none}
#nav-underline{display:block;position:absolute;left:0;bottom:-8px;height:3px;width:0;background:var(--header-accent);border-radius:3px;transition:transform .25s,width .25s;pointer-events:none}

#menu-toggle{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:inherit}
#close-menu{display:none}
@media (max-width:768px){
  #menu-toggle{display:block}
  nav{
    position:fixed;inset:0;background:rgba(0,0,0,.55);
    -webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);
    display:flex;flex-direction:column;padding:4rem 2rem 2rem;gap:2rem;align-items:center;justify-content:center;overflow:auto;text-align:center;
    opacity:0;visibility:hidden;pointer-events:none;transform:translateY(-8px);
    transition:opacity .28s cubic-bezier(.2,.7,.2,1),transform .28s cubic-bezier(.2,.7,.2,1),visibility 0s linear .28s;z-index:1500
  }
  nav.open{opacity:1;visibility:visible;pointer-events:auto;transform:translateY(0)}
  nav.open a{font-size:1.35rem;padding:.8rem 1rem;margin:.5rem 0;display:inline-block;position:relative;padding-left:1.25rem;text-align:left}
  nav.open a.active::before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:70%;background:var(--header-accent);border-radius:2px}
  nav.open #theme-toggle{font-size:1.6rem;padding:.8rem 1rem}
  #close-menu{display:block;position:absolute;top:1.5rem;right:1.5rem;font-size:2rem;color:inherit;background:none;border:none;cursor:pointer;z-index:1600}
  #nav-underline{display:none}
}

/* ---------- icons & theme toggle ---------- */
.material-symbols-outlined{
  font-family:'Material Symbols Outlined';
  font-weight:normal;font-style:normal;font-size:24px;line-height:1;
  letter-spacing:normal;text-transform:none;display:inline-block;
  -webkit-font-feature-settings:'liga';font-feature-settings:'liga';
  -webkit-font-smoothing:antialiased;font-variation-settings:'FILL' 0,'wght' 400,'GRAD' 0,'opsz' 24;color:inherit
}
#theme-toggle{appearance:none;background:none;border:none;padding:0;color:inherit;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;line-height:0;position:relative}
#theme-toggle:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px}
#theme-toggle .material-symbols-outlined{position:absolute;inset:0;display:inline-flex;align-items:center;justify-content:center;opacity:0;transform:rotate(-20deg) scale(.9);transition:opacity .18s,transform .25s;pointer-events:none}
#theme-toggle .material-symbols-outlined.is-active{opacity:1;transform:rotate(0) scale(1)}
#theme-toggle:hover .material-symbols-outlined.is-active{transform:rotate(0) scale(1.1)}

/* ---------- logo (no hover motion) ---------- */
.logo{display:inline-flex;align-items:center;gap:.6rem;text-decoration:none;color:inherit}
.logo-badge{width:48px;height:48px;display:inline-flex;align-items:center;justify-content:center;border-radius:12px;transition:none}
.logo-badge:hover{transform:none;outline:none;box-shadow:none}
.logo-svg{width:100%;height:100%;display:block}
@media (max-width:768px){.logo-badge{width:42px;height:42px}}

/* ---------- type ---------- */
.lead{font-size:1.05rem;line-height:1.7;opacity:.95;max-width:68ch}
.hero-title{font-size:clamp(2.4rem,4.5vw,3rem);font-weight:800;letter-spacing:-.02em;margin-bottom:.5rem}
h2{font-size:clamp(1.8rem,3.2vw,2rem);font-weight:800;letter-spacing:-.01em;margin-bottom:.6rem}
.h3,.project-card h3{font-size:1.15rem;font-weight:600}
.eyebrow{font-size:.95rem;opacity:.8}

/* ---------- links & buttons ---------- */
a{color:var(--link);text-underline-offset:.18em;text-decoration-thickness:.08em}
a:hover{text-decoration:underline}
a:focus-visible{outline:3px solid var(--focus-ring);outline-offset:3px}
header a:hover{text-decoration:none}

.btn,.btn:link,.btn:visited{
  appearance:none;display:inline-flex;align-items:center;justify-content:center;
  padding:.6rem .95rem;border-radius:var(--radius);
  border:1px solid var(--panel-border);background:var(--panel-bg);color:var(--panel-fg);
  text-decoration:none;cursor:pointer;white-space:nowrap;
  transition:background .2s,color .2s,border-color .2s,box-shadow .2s,transform .05s;
  font-weight:700;
}
a.btn{text-decoration:none}
.btn:hover{background:var(--panel-hover);border-color:var(--accent-strong)}
.btn:active{transform:translateY(1px)}
.btn.primary{background:var(--accent);color:var(--bg);border-color:var(--accent)}
.btn.primary:hover{background:var(--accent-hover);border-color:var(--accent-hover);box-shadow:var(--elev-shadow)}
.btn.primary:active{background:var(--accent-active);border-color:var(--accent-active);box-shadow:none}
.btn.small{padding:.35rem .6rem;font-size:.92rem}
.btn[disabled],.btn[aria-disabled="true"]{opacity:.55;filter:grayscale(20%);box-shadow:none!important;transform:none!important;cursor:not-allowed}

/* ---------- hero ---------- */
.hero-wrap{display:grid;grid-template-columns:1.1fr .9fr;gap:var(--s-2);align-items:center}
.hero-media{display:block;width:100%;height:auto;border-radius:.5rem;opacity:.96}
@media (max-width:900px){.hero-wrap{grid-template-columns:1fr}.hero-text{order:2}}
.hero-text{display:grid;gap:.6rem}
.hero-text .lead{margin:0}
.cta-row{display:flex;gap:.8rem;margin:.2rem 0 0 0;flex-wrap:wrap;align-items:center}
.social-icons{display:flex;gap:.8rem;align-items:center;margin-top:.25rem}
.social-icons a{display:inline-flex;width:28px;height:28px;line-height:0;color:var(--fg)}
.social-icons a:hover{opacity:.9}
.social-icons svg{width:100%;height:100%;fill:currentColor}

/* ---------- about & KPI ---------- */
.about-wrap{display:grid;grid-template-columns:1fr .7fr;gap:4rem;align-items:start}
@media (max-width:900px){.about-wrap{grid-template-columns:1fr;gap:var(--s-2)}}
.about-side{display:grid;gap:.9rem}
.kpi{background:var(--panel-bg);color:var(--panel-fg);border:1px solid var(--panel-border);border-radius:var(--radius);padding:.85rem}
.kpi-title{font-weight:800;font-size:1.3rem}
.kpi-sub{opacity:.95}
.tools-title{font-weight:700;margin-bottom:.4rem}
.chips{list-style:none;display:flex;gap:.4rem;flex-wrap:wrap}
.chips li{
  font-size:.82rem;padding:.22rem .5rem;border-radius:.45rem;
  background:var(--panel-bg);color:var(--panel-fg);border:1px solid var(--panel-border)
}

/* ---------- timeline ---------- */
.timeline{--tl-x:1rem;--tl-gutter:1.25rem;--dot:10px;--tl-dot-offset:.95rem;--tl-tail:.75rem;position:relative;margin-top:1rem;padding-left:calc(var(--tl-x) + var(--tl-gutter))}
.timeline::before{content:"";position:absolute;left:var(--tl-x);top:var(--tl-dot-offset);bottom:calc(var(--tl-dot-offset) - var(--tl-tail));width:2px;background:var(--accent);transform:translateX(-50%)}
.timeline-list{list-style:none;display:grid;gap:1.15rem}
.timeline-list li{position:relative}
.timeline-list li::before{
  content:"";position:absolute;left:calc(-1 * var(--tl-gutter));top:var(--tl-dot-offset);
  width:var(--dot);height:var(--dot);border:2px solid var(--accent);border-radius:50%;
  background:var(--bg);box-shadow:none;transform:translate(-50%,-50%)
}
.timeline-list li:first-child::before{ background:var(--accent) }

/* ---------- references ---------- */
.ref-card{
  background:var(--panel-bg);color:var(--panel-fg);
  border-radius:var(--radius);padding:1rem;border:1px solid var(--panel-border);
  transition:background .2s,box-shadow .2s,border-color .2s;
  display:flex;flex-direction:column;min-height:220px;position:relative
}
@media (max-width:768px){.ref-card{min-height:unset}}
.ref-card:hover{background:var(--panel-hover);box-shadow:var(--elev-shadow);border-color:var(--accent-strong)}
.ref-quote{margin:0 0 1rem 0;line-height:1.6}
.ref-quote p{margin:0 0 1rem 0}
.ref-meta{display:grid;grid-template-columns:auto 1fr;gap:.65rem;align-items:center;border-top:1px solid color-mix(in oklab, var(--panel-fg) 15%, transparent);padding-top:.6rem;margin-top:auto}
.ref-cite{font-style:normal;font-weight:700;line-height:1.25}
.ref-name{font-weight:700;line-height:1.25}
.ref-title{font-size:.93rem;opacity:.9;line-height:1.35}

/* Controls */
.ref-controls{display:flex;justify-content:flex-end;gap:.5rem;margin:.25rem 0 .5rem}

/* Padding above list */
.ref-list { padding-top: 1rem; }
@media (min-width: 768px) { .ref-list { padding-top: 1rem; } }

/* ---------- masked reference logos (theme-aware) ---------- */
:root, html[data-theme="light"], body.light-theme { --ref-chip-bg:#F2F2F0; --ref-chip-fg:#004643; }
html[data-theme="dark"], body:not(.light-theme) { --ref-chip-bg:#004643; --ref-chip-fg:#F2F2F0; }

.logo-chip{
  --logo-size: 34px;
  background: var(--ref-chip-bg);
  color: var(--ref-chip-fg);
  border: 2px solid var(--ref-chip-bg);
  display: inline-grid;
  place-items: center;
  min-width: 60px;
  height: 44px;
  padding: 0 .6rem;
  border-radius: .55rem;
  font-weight: 700;
  line-height: 1;
}
.logo-mask::before{
  content:"";
  width: var(--logo-size);
  height: var(--logo-size);
  display:block;
  background: currentColor;
  -webkit-mask: var(--logo-url) no-repeat center / contain;
          mask: var(--logo-url) no-repeat center / contain;
}
.ref-logo{ display:none !important; }

/* ---------- projects ---------- */
.project-list{ display:grid; grid-template-columns:1fr; gap:var(--s-2) }
.project-card{
  background:var(--panel-bg);color:var(--panel-fg);
  padding:1rem;border-radius:var(--radius);cursor:pointer;
  transition:background .2s,box-shadow .2s,border-color .2s;
  border:1px solid var(--panel-border);box-shadow:none;position:relative
}
.project-card:hover{background:var(--panel-hover);box-shadow:var(--elev-shadow);border-color:var(--accent-strong)}
.project-card__head{display:flex;align-items:center;justify-content:space-between;gap:1rem}
.tags{list-style:none;display:flex;gap:.4rem;flex-wrap:wrap}

/* ---------- tags on project cards ---------- */
:root{
  --chip-on-card-bg: var(--paper);
  --chip-on-card-fg: var(--paper-ink);
  --chip-on-card-border: color-mix(in oklab, var(--paper-ink) 18%, transparent);
}
html[data-theme="dark"], body:not(.light-theme){
  --chip-on-card-bg: var(--cyprus);
  --chip-on-card-fg: var(--sand);
  --chip-on-card-border: color-mix(in oklab, var(--cyprus) 20%, transparent);
}

.tags{
  list-style:none;
  display:flex;
  gap:.4rem;
  flex-wrap:wrap;
}
.tags li{
  font-size:.82rem;
  padding:.22rem .5rem;
  border-radius:.45rem;
  background:var(--panel-bg);
  color:var(--panel-fg);
  border:1px solid var(--panel-border);
}

.project-card .tags li{
  background: var(--chip-on-card-bg);
  color: var(--chip-on-card-fg);
  border: 1px solid var(--chip-on-card-border);
}

.project-card .tags li:hover{
  background: color-mix(in oklab, var(--chip-on-card-bg) 92%, var(--chip-on-card-fg) 8%);
  border-color: color-mix(in oklab, var(--chip-on-card-border) 50%, var(--chip-on-card-fg) 50%);
}


/* Search */
.project-search{ display:flex; align-items:center; gap:.75rem; margin-bottom:var(--s-2); flex-wrap:wrap }
.project-search label{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:0!important;overflow:hidden!important;clip:rect(1px,1px,1px,1px)!important;clip-path:inset(50%)!important;border:0!important;white-space:nowrap!important}
.project-search input[type="search"]{flex:1 1 260px}
.project-search input[type="search"]::placeholder{color:var(--panel-fg);font-weight:700;opacity:1}
.project-search input[type="search"]::-webkit-input-placeholder{color:var(--panel-fg);font-weight:700;opacity:1}

/* ---------- forms ---------- */
form{margin-top:.5rem}
.form-row{display:grid;gap:.15rem;margin-bottom:.25rem}
input[type="text"],input[type="email"],textarea,.project-search input[type="search"]{
  font:inherit;padding:.48rem .7rem;border-radius:var(--radius);
  background:var(--panel-bg);color:var(--panel-fg);border:1px solid var(--panel-border);
  transition:border-color .15s,box-shadow .15s,background .15s
}
input:hover,textarea:hover,.project-search input[type="search"]:hover{border-color:var(--accent-strong);background:var(--panel-hover)}
input:focus-visible,textarea:focus-visible,.project-search input[type="search"]:focus-visible{
  outline:3px solid var(--focus-ring);outline-offset:3px;border-color:var(--focus-ring);box-shadow:0 0 0 3px var(--focus-ring-halo)
}

/* Contact section: minimal (no focus rings) */
#contact :is(input,textarea){transition:border-color .15s,background .15s}
#contact :is(input:hover,textarea:hover){border-color:var(--panel-border);background:var(--panel-bg)}
#contact :is(input:focus-visible,textarea:focus-visible){outline:none;box-shadow:none;border-color:var(--panel-border)}

/* Errors */
.is-invalid{border-color:var(--error)!important}
.field-error{color:var(--error);min-height:1.05rem;font-size:.85rem;margin-top:.15rem}
.char-counter{font-size:.85rem;opacity:.85;margin-top:.15rem}
.form-actions{display:flex;align-items:center;gap:.8rem;margin-top:.6rem}
.email-link{color:var(--fg);text-decoration:underline}
.email-link:hover{opacity:.85}

/* Hide honeypot Website field */
input[name="website"],#website,label[for="website"],.honeypot,.hp{
  position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:0!important;
  overflow:hidden!important;clip:rect(1px,1px,1px,1px)!important;clip-path:inset(50%)!important;border:0!important;white-space:nowrap!important
}

/* ---------- modal / popover ---------- */
.modal{display:none;position:fixed;inset:0;z-index:1000;background:rgba(0,0,0,.7);justify-content:center;align-items:center}
.modal.is-open{display:flex}
.modal-content{
  background:var(--panel-bg);color:var(--panel-fg);padding:2rem;border-radius:var(--radius);
  max-width:640px;width:100%;margin:1rem;border:1px solid var(--panel-border);position:relative;
  max-height:85vh;overflow:auto;overscroll-behavior:contain;-webkit-overflow-scrolling:touch;
}
.modal-content p + p { margin-top: 1rem; }
.modal .close,.popover .close,.close-btn{
  position:absolute;top:.5rem;right:.5rem;appearance:none;background:transparent;border:0;color:var(--panel-fg);
  width:36px;height:36px;display:inline-grid;place-items:center;cursor:pointer;border-radius:.5rem
}
.modal .close:hover,.popover .close:hover,.close-btn:hover{background:color-mix(in oklab, var(--panel-fg) 10%, transparent)}
.modal .close:focus-visible,.popover .close:focus-visible,.close-btn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px}
.modal .close .material-symbols-outlined,.popover .close .material-symbols-outlined{color:currentColor;font-size:22px}

/* ---------- footer ---------- */
footer{
  text-align:center;padding:2rem;background:var(--footer-bg);color:var(--footer-fg);
  font-weight:700;
}
footer a{color:inherit}
footer a:hover{color:var(--accent)}

/* ---------- loader & reveal ---------- */
#loader{position:fixed;inset:0;background:var(--bg);color:var(--fg);display:flex;align-items:center;justify-content:center;z-index:9999;font-size:1.1rem;font-weight:700;opacity:1;transition:opacity .25s}
#loader.is-hidden{opacity:0;pointer-events:none;visibility:hidden}
.reveal{opacity:0;transform:translateY(10px);transition:opacity .5s,transform .5s}
.reveal.visible{opacity:1;transform:none}
@media (prefers-reduced-motion:reduce){.reveal{opacity:1;transform:none;transition:none}}

/* ---------- global focus ---------- */
:focus-visible{outline:3px solid var(--focus-ring);outline-offset:3px;border-radius:.25rem}
a:focus-visible,button:focus-visible{text-decoration:none}
header a:focus-visible,header button:focus-visible,header .logo:focus-visible{outline:3px solid #ffffff!important;outline-offset:3px}
